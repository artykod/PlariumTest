Описание архитектуры проекта.


Весь проект разбит на два крупных блока:
1) Оттдельный проект dll с логикой игры.
2) Проект юнити, отображающий и управляющий логикой игры.



Проект dll с логикой игры.

Проект логики игры также делится на части:
1) Дескрипторы - описания игровых сущностей.
2) Логика - классы непосредственно ответственные за обработку логики игры.

Дескрипторы.
Данные хранятся в виде json, в которых производится редактирование карт/зданий/юнитов/абилок/модификаторов. Для десериализации используется Json.Net for Unity.
Каждый дескриптор имеет свой уникальный строковый идентификатор (Id). А также идентификатор логики (LogicId) и отображения (ViewId).
При старте игры в ОЗУ грузятся все игровые дескрипторы (возможна подгрузка извне из папки DescriptorsData рядом с EXE игры).

Логика.
Ключевой класс логики - GameController. Через него ведется общение логики и юнити проекта. Также он ответственен за хранение/поиск дескрипторов и создание экземпляров логики для конкретных дескрипторов.
GameController обновляется каждый кадр и обновляет всю созданную им логику.
Визуализация логики осуществляется посредством набора событий. Например, GameController стартует игру с некоторым Id карты. По этому Id ищется соответствующий дескриптор, из которого уже создается логическое описание сущности карты.
После этого GameController вещает событие о создании логики для сущности. Юнити-код получает это событие и по полученной логике создает визуальное отображение этой сущности, исходя из ViewId в ее дескрипторе.
Логика карты, в свою очередь, опираясь на маркеры объектов в своем дескрипторе запрашивает у GameController создание объектов для этих маркеров, для которых точно так же ищется дескриптор, а затем создается логическое описание сущности, 
которое генерирует событие о создании сущности и юнити-код создает визуалку для этих объектов.
При уничтожении объектов срабатывает аналогичное событие, которое провоцирует удаление визуалки сущности в юнити.

В проекте логики игры имеется набор утилитных интерфейсов для различной реализации в зависимости от платформы, где будет обрабатываться игра (юнити-клиент, сервер, какие-то консольные прогоны и т.п.).
К таким интерфейсам относится вывод логов (IDebug), отслеживание времени (ITimeController), хранение данных (IStorage). Перед запуском логики необходимо указать платформозависимые имлементации для этих интерфейсов.


Проект юнити.

Ключевой класс юнити-проекта - Core. Является синглетоном. Объект создается самым первым в списке (Script Execution Order). Производит загрузку дескрипторов, стартует GameController, слушает его события. 
Содержит ссылки на ключевые объекты игры (GameController, GameCamera, GameUI).
Префабы визуалок для игровых сущностей (карты, юниты, абилки) находятся в папке Resources и подгружаются по мере необходимости по имени (ViewId в дескрипторах).
Большая часть префабов находится в ресурсах. Имена задаются в дескрипторах сущностей. Пути через атрибут PathInResources у конкретных классов.
Поле боя представлено плоским террейном. Все происходящее внутри игры проецируется на плоскость XZ (т.е. в логике X есть X, а Z есть Y).
Для построения интерфейсов используется Unity New UI. Есть несколько вспомогательных классов для кнопок и показа модальных диалогов в папке Scripts/UI.
Анимации персонажей работают на Mecanim. Имеют три стейта: стоять на месте (Idle), бежать (Run), атаковать (Attack). Есть один базовый аниматор-контроллер для главного персонажа, остальные персонажи его просто переопределяют.
Управляются через триггеры (idle, run, attack). Для лучницы анимация не вся, ибо не нашел.

Баланс игры пока сыроват. Редактируется пока прямо в json-файлах (папка DescriptorsData). При запуске игра по умолчанию попробует загрузить их из рядом лежащей с бинарником папки, если не получится, то уже из внутренних ресурсов дистрибутива.
Задержка перед стартом боя задается для каждой карты индивидуально.